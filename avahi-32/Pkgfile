# Description: A system which facilitates service discovery on a local network via the mDNS/DNS-SD protocol suite
# URL: http://www.avahi.org/
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: avahi dbus-32 glib-32 gdbm-32 libdaemon-32

name=avahi-32
version=0.7
release=1
source=(http://avahi.org/download/${name:0:5}-$version.tar.gz)

build() {
  cd ${name:0:5}-$version
  export PKG_CONFIG_PATH='/usr/lib32/pkgconfig'
  PYTHON=/usr/bin/python3 \
  ./configure --prefix=/usr \
    --libdir=/usr/lib32 \
    --with-distro=none \
    --disable-gtk \
    --disable-gtk3 \
    --disable-qt3 \
    --disable-qt4 \
    --disable-python \
    --disable-pygobject \
    --disable-python-dbus \
    --disable-mono \
    --disable-monodoc \
    --disable-nls \
    --enable-compat-libdns_sd
  make
  make DESTDIR=$PKG install
  rm -fr $PKG/usr/{bin,sbin,lib,etc,include,share}
}
