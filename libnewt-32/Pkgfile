# Description: a programming library for color text mode
# URL: https://pagure.io/newt
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: slang-32 popt-32 tcl-32

name=libnewt-32
version=0.52.21
release=1
source=(https://releases.pagure.org/newt/newt-$version.tar.gz)
git=(https://pagure.io/newt.git)

build() {
  #git clone $git newt
  #cd newt
  cd newt-$version
  sed -i "s:tcl8.4:tcl8.6:" Makefile.in
  echo '#define USE_INTERP_RESULT 1' >> config.h
  export CC='gcc -m32'
  export PKG_CONFIG_PATH='/usr/lib32/pkgconfig'
  ./autogen.sh
  ./configure --prefix=/usr \
    --libdir=/usr/lib32 \
    --without-python \
    --disable-nls
  make
  make DESTDIR=$PKG install
  rm -fr $PKG/usr/{bin,include,share}
}
