# Description: Python bindings for GLib/GObject/GIO/GTK+/GStreamer
# URL: https://wiki.gnome.org/Projects/PyGObject
# Maintainer: Danny Rawlins, crux at romster dot me
# Depends on: gobject-introspection python-cairo

name=python-gobject-32
version=3.30.1
release=1
source=(https://ftp.gnome.org/pub/GNOME/sources/pygobject/${version::4}/pygobject-$version.tar.xz)

build() {
  meson pygobject-$version build \
    --prefix /usr \
    -Dpython=/usr/bin/python \
    --libdir=/usr/lib32
  ninja -C build -j 1
  DESTDIR=$PKG meson install -C build -j 1

  /usr/bin/python -m compileall -d /usr/lib32 $PKG/usr/lib32
  /usr/bin/python -O -m compileall -d /usr/lib32 $PKG/usr/lib32

  rm -r $PKG/usr/{include,lib/pkgconfig}
}
