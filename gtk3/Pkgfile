# Description: A multi-platform toolkit for creating graphical user interfaces
# URL: http://www.gtk.org/
# Maintainer: Fredrik Rinnestam, fredrik at crux dot nu
# Depends on: gdk-pixbuf, pango, at-spi2-atk, libepoxy

name=gtk3
version=3.24.10
release=1
source=(http://download.gnome.org/sources/gtk+/${version:0:4}/gtk+-$version.tar.xz)

build () {
  cd gtk+-$version

  mkdir builddir ; cd builddir
  #sed -e 's/testinc.*//g' \
  #-e '817d' -e '818d' -e '819d' -e '820d' \
  #  -i ../meson.build
  meson .. --prefix=/usr \
    -Dgtk_doc=false \
    -Dman-pages=false \
    -Dbuild-tests=false \
    -Dbuild-examples=false \
    -Ddemos=false \
    -Dmedia=all
  ninja
  DESTDIR=$PKG ninja install
    #-D{broadway,wayland,win32,quartz}-backend=false \

  rm -r $PKG/usr/share/{locale,gtk-3.0}
  rm $PKG/usr/bin/gtk-update-icon-cache
}
